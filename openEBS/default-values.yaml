# values-openebs-local.yaml
# Clean, minimal setup for OpenEBS using LocalPV HostPath only

# --- OpenEBS CRDs ---
openebs-crds:
  csi:
    volumeSnapshots:
      enabled: true     # השאר פעיל אם אין לך CRDs אחרים לקונפליקט
      keep: true

# --- LocalPV Provisioner ---
localpv-provisioner:
  rbac:
    create: true

# --- ZFS LocalPV (Disabled) ---
zfs-localpv:
  enabled: false
  crds:
    zfsLocalPv:
      enabled: false
    csi:
      volumeSnapshots:
        enabled: false

# --- LVM LocalPV (Disabled) ---
lvm-localpv:
  enabled: false
  crds:
    lvmLocalPv:
      enabled: false
    csi:
      volumeSnapshots:
        enabled: false

# --- Mayastor (Disabled) ---
mayastor:
  enabled: false
  csi:
    node:
      initContainers:
        enabled: false
  etcd:
    clusterDomain: cluster.local
  localpv-provisioner:
    enabled: false
  crds:
    enabled: false
  loki:
    enabled: false
  alloy:
    enabled: false

# --- Pre-Upgrade Hook (default, keep) ---
preUpgradeHook:
  tolerations: []
  imagePullSecrets: []
  podLabels: {}
  image:
    registry: docker.io
    repo: bitnami/kubectl
    tag: "1.25.15"
    pullPolicy: IfNotPresent

# --- Engines configuration ---
engines:
  local:
    lvm:
      enabled: false
    zfs:
      enabled: false
  replicated:
    mayastor:
      enabled: false    # ביטול מוחלט של מנוע רפליקציה

# --- Loki and Alloy disabled (logging stack not needed) ---
loki:
  enabled: false

alloy:
  enabled: false

# --- LocalPV HostPath Default Class ---
localpv:
  hostpathClass:
    enabled: true
    isDefaultClass: true
    basePath: /var/openebs/local