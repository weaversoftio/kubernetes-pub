# =====================================================
# Samsung Kubernetes Platform - Configuration Reference
# =====================================================
# 
# âš ï¸ ×§×•×‘×¥ ×–×” ×”×•× ×ª×™×¢×•×“ ×•××“×¨×™×š ×‘×œ×‘×“ (Reference Documentation)
# 
# ×”×•×¨××•×ª ×©×™××•×©:
# 1. ×§×¨× ××ª ×”×§×•×‘×¥ ×”×–×” ×›×“×™ ×œ×”×‘×™×Ÿ ××™×œ×• ×¢×¨×›×™× × ×™×ª×Ÿ ×œ×©× ×•×ª
# 2. ×¢×‘×•×¨ ×œ×›×œ ×ª×™×§×™×™×” (MetalLB, Gateway-Fabric, ×•×›×•') ×•×¢×¨×•×š ××ª ×§×‘×¦×™ ×”-YAML
# 3. ×œ××—×¨ ×”×¢×¨×™×›×” ×”×¨×¥: ./install-all.sh (××• install.sh ×‘×›×œ ×ª×™×§×™×™×” ×‘× ×¤×¨×“)
#
# ğŸ’¡ ×œ× × ×™×ª×Ÿ ×œ×©× ×•×ª ×¨×§ ×§×•×‘×¥ ×–×” - ×¦×¨×™×š ×œ×¢×¨×•×š ××ª ×”×§×‘×¦×™× ×‘×›×œ ×ª×™×§×™×™×”!
#
# =====================================================

# ========== ×”×’×“×¨×•×ª ×›×œ×œ×™×•×ª ==========
cluster:
  # Domain name for all services (*.domain will be used)
  # ×“×•×’××”: samsung.local, company.local, client.local
  domain: "samsung.local"
  
  # Kubernetes context (leave empty for current context)
  # ×× ×¨×™×§ - ×™×©×ª××© ×‘-context ×”× ×•×›×—×™
  context: ""


# ========== MetalLB - Load Balancer ==========
metallb:
  # Namespace for MetalLB
  namespace: "metallb-system"
  
  # IP address pool name
  pool_name: "dcs-pool"
  
  # IP range for LoadBalancer services
  # ×¤×•×¨××˜: START_IP-END_IP
  # ×“×•×’××”: 192.168.1.100-192.168.1.200
  ip_range: "192.168.33.154-192.168.33.160"
  
  # Helm chart version (leave as-is unless upgrading)
  chart_version: "0.15.2"
  
  # ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”:
  #    ×¢×¨×•×š ××ª ×”×§×•×‘×¥: MetalLB/metallb-addresspool.yaml


# ========== Gateway Fabric - Ingress Gateway ==========
gateway:
  # Namespace for NGINX Gateway Fabric
  namespace: "nginx-gateway"
  
  # Gateway name
  name: "samsung-gateway-fabric"
  
  # LoadBalancer IP for the Gateway
  # ×—×™×™×‘ ×œ×”×™×•×ª ×‘×ª×•×š ×”-IP range ×©×œ MetalLB
  loadbalancer_ip: "192.168.33.157"
  
  # Gateway Class name
  gateway_class: "nginx"
  
  # Helm chart version
  chart_version: "1.5.1"
  
  # TLS Certificate secret name
  tls_secret_name: "samsung-tls-certificate"
  
  # ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”:
  #    ×¢×¨×•×š ××ª ×”×§×•×‘×¥: Gateway-Fabric/gateway.yaml
  #    ×•×©× ×” ××ª domain ×‘-install.sh (×©×•×¨×•×ª 23-24) ×× ×¦×¨×™×š domain ××—×¨


# ========== Kyverno - Convention over Configuration (CoC) Policy Engine ==========
kyverno:
  # Namespace for Kyverno
  namespace: "kyverno"
  
  # Convention over Configuration Policies
  # These policies automate HTTPRoute creation and enforce naming conventions
  policies:
    # 1. Auto-generate HTTPRoute from Service
    # When a Service has annotation expose: "true", automatically creates HTTPRoute
    # with hostname: {service-name}-{namespace}.samsung.local
    auto_generate_httproute: true
    
    # 2. Validate Service naming convention
    # Enforces DNS-compatible names (lowercase, hyphens only)
    # Prevents invalid names like: My-App, my_app, my.app
    validate_service_naming: true
    
    # 3. Auto-add Gateway parentRef to HTTPRoute
    # Safety policy: adds samsung-gateway-fabric as parent if not specified
    auto_gateway_parent: true
  
  # Cluster domain for auto-generated hostnames
  # Format: {service}-{namespace}.{cluster_domain}
  cluster_domain: "samsung.local"
  
  # ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”:
  #    ×¢×¨×•×š ××ª ×”×§×‘×¦×™×:
  #    - kyverno/generate-httproute-from-service.yaml (×©×•×¨×•×ª 51-52, 55)
  #    - kyverno/add-gateway-parent-ref.yaml (×©×•×¨×•×ª 35-36)
  #    - kyverno/validate-service-naming.yaml (regex pattern)


# ========== Headlamp - Kubernetes Dashboard ==========
headlamp:
  # Namespace for Headlamp
  namespace: "headlamp"
  
  # Hostname for Headlamp (without https://)
  # ×“×•×’××”: headlamp.samsung.local
  hostname: "headlamp.samsung.local"
  
  # Admin user configuration
  admin:
    # Admin user email (used in RBAC)
    email: "admin@samsung.local"
    
    # Admin service account name
    service_account: "headlamp-admin"
  
  # Helm chart version
  chart_version: "0.34.0"
  
  # OIDC Configuration (for DEX integration)
  oidc:
    # Enable OIDC authentication
    enabled: false
    
    # OIDC issuer URL (DEX URL)
    issuer_url: "https://dex.samsung.local"
    
    # OIDC client ID
    client_id: "headlamp"
  
  # ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”:
  #    ×¢×¨×•×š ××ª ×”×§×‘×¦×™×:
  #    - Headlamp/headlamp-httproute-fabric.yaml (hostname)
  #    - Headlamp/headlamp-admin-user.yaml (email, service account)
  #    - Headlamp/headlamp-values.yaml (OIDC settings)
    
    # OIDC client secret
    client_secret: "headlamp-secret-change-me"


# ========== DEX - OIDC Authentication (Optional) ==========
dex:
  # Enable DEX installation
  enabled: false
  
  # Namespace for DEX
  namespace: "dex"
  
  # Hostname for DEX (without https://)
  hostname: "dex.samsung.local"
  
  # Static users (for testing)
  static_users:
    - email: "admin@samsung.local"
      # Password hash - generated with: echo "admin" | htpasswd -BinC 10 admin | cut -d: -f2
      password_hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"
      username: "admin"
      
    - email: "user@samsung.local"
      password_hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"
      username: "user"
  
  # LDAP/AD Configuration (for production)
  ldap:
    enabled: false
    host: "ldap.samsung.local:389"
    bind_dn: "cn=admin,dc=samsung,dc=local"
    bind_password: "password"
    base_dn: "dc=samsung,dc=local"
  
  # Helm chart version
  chart_version: "0.18.0"
  
  # ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”:
  #    ×¢×¨×•×š ××ª ×”×§×‘×¦×™×:
  #    - DEX/dex-httproute.yaml (hostname)
  #    - DEX/dex-values.yaml (users, LDAP, issuer)
  #    - DEX/rbac-admin-user.yaml (admin email)


# ========== Trident - NetApp Storage CSI Driver (Optional) ==========
trident:
  # Enable Trident installation
  enabled: false
  
  # Namespace for Trident
  namespace: "trident"
  
  # Trident version (must match the chart version)
  version: "24.10.0"
  
  # NetApp ONTAP Backend Configuration
  backend:
    # Backend name
    name: "ontap-nas-backend"
    
    # Storage driver (ontap-nas, ontap-san, etc.)
    driver: "ontap-nas"
    
    # NetApp Management LIF IP
    # âš ï¸ CHANGE ME: Your NetApp cluster management IP
    management_lif: "192.168.1.100"
    
    # NetApp Data LIF IP
    # âš ï¸ CHANGE ME: Your NetApp data network IP
    data_lif: "192.168.1.101"
    
    # Storage Virtual Machine (SVM) name
    # âš ï¸ CHANGE ME: Your SVM name
    svm: "svm_name"
    
    # NetApp credentials (will be created as Kubernetes secret)
    # âš ï¸ CHANGE ME: Use secure credentials in production
    credentials:
      username: "admin"
      password: "password"
    
    # Storage prefix for volumes
    storage_prefix: "trident_"
    
    # NFS mount options
    nfs_mount_options: "nfsvers=4.1"
  
  # StorageClass configuration
  storageclass:
    # StorageClass name
    name: "netapp-storage"
    
    # Set as default StorageClass
    is_default: true
    
    # Allow volume expansion
    allow_volume_expansion: true
    
    # Reclaim policy (Delete or Retain)
    reclaim_policy: "Delete"
  
  # Image configuration (for offline/air-gapped environments)
  images:
    # Trident image
    trident: "docker.io/netapp/trident:24.10.0"
    
    # Autosupport image
    autosupport: "docker.io/netapp/trident-autosupport:24.10.0"
    
    # Image pull policy
    pull_policy: "IfNotPresent"
    
    # Image pull secrets (for private registry)
    # pull_secrets: []
  
  # Helm chart version
  chart_version: "100.2410.0"
  
  # ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”:
  #    ×¢×¨×•×š ××ª ×”×§×‘×¦×™×:
  #    - Trident/secret-template.yaml (NetApp credentials)
  #    - Trident/backend-ontap-nas.yaml (NetApp backend config)
  #    - Trident/storageclass.yaml (storage class settings)
  #    - Trident/trident-orchestrator.yaml (namespace, version)


# ========== Advanced Settings ==========
advanced:
  # Skip pre-installation checks
  skip_checks: false
  
  # Verbose output during installation
  verbose: false
  
  # Dry-run mode (preview commands without executing)
  dry_run: false
  
  # Install components in specific order
  # ×× false, ×™×©××œ ××™×–×” components ×œ×”×ª×§×™×Ÿ
  install_all: true
  
  # Components to install (if install_all is false)
  components:
    - metallb
    - gateway
    - kyverno
    - headlamp
    # - dex      # uncomment to install DEX
    # - trident  # uncomment to install Trident


# ========== Offline Installation ==========
offline:
  # Use offline images (from offline-images/ directory)
  enabled: false
  
  # Load images before installation
  load_images: false


# =====================================================
# ğŸ’¡ ×ª×–×›×•×¨×ª ×—×©×•×‘×”!
# =====================================================
# 
# ×§×•×‘×¥ ×–×” ×”×•× **×¨×¤×¨× ×¡ ×‘×œ×‘×“** - ×”×•× ××ª×¢×“ ××ª ×›×œ ×”××¤×©×¨×•×™×•×ª ×•×”×¢×¨×›×™×.
# 
# ×›×“×™ ×œ×©× ×•×ª ×¢×¨×›×™× ×‘×¤×•×¢×œ:
# 1. ××¦× ××ª ×”×¡×¢×™×£ ×”×¨×œ×•×•× ×˜×™ ×œ××¢×œ×” (MetalLB, Gateway, Kyverno, ×•×›×•')
# 2. ×§×¨× ××ª ×”×”×¢×¨×” "ğŸ“ ×œ×©×™× ×•×™ ×¢×¨×›×™× ××œ×”" ×œ×¨××•×ª ××™×œ×• ×§×‘×¦×™× ×œ×¢×¨×•×š
# 3. ×¢×‘×•×¨ ×œ×ª×™×§×™×™×” ×”××ª××™××” ×•×¢×¨×•×š ××ª ×§×•×‘×¥ ×”-YAML ×”×¨×œ×•×•× ×˜×™
# 4. ×”×¨×¥ ./install-all.sh ××• ./[component]/install.sh
# 
# ×“×•×’××”:
#   ×¨×•×¦×” ×œ×©× ×•×ª ××ª ×”-IP range ×©×œ MetalLB?
#   â†’ ×¢×¨×•×š ××ª: MetalLB/metallb-addresspool.yaml
#   â†’ ×”×¨×¥: cd MetalLB && ./install.sh
# 
# =====================================================

