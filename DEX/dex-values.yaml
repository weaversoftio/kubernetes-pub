# DEX Helm Values
# Samsung Kubernetes Platform
# Based on official Headlamp documentation

# DEX configuration
config:
  issuer: https://dex.samsung.local
  
  storage:
    type: kubernetes
    config:
      inCluster: true
  
  # Enable password database for static users (testing)
  enablePasswordDB: true
  
  # Static users for testing
  # To generate password hash: echo "password" | htpasswd -BinC 10 admin | cut -d: -f2
  staticPasswords:
  - email: "admin@samsung.local"
    hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"  # password: admin
    username: "admin"
    userID: "08a8684b-db88-4b73-90a9-3cd1661f5466"
  - email: "user@samsung.local"
    hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"  # password: admin
    username: "user"
    userID: "41331323-6f44-45e6-b3b9-2c4b60c02be5"
  
  # OAuth2 configuration
  oauth2:
    skipApprovalScreen: true
  
  # Static clients
  staticClients:
  - id: headlamp
    name: Headlamp
    secret: headlamp-secret-change-me
    redirectURIs:
    - 'https://headlamp.samsung.local/oidc-callback'
    - 'http://localhost:4466/oidc-callback'
  
  # Connectors - for future LDAP/AD integration
  # Uncomment when ready to switch from static users
  # connectors:
  # - type: ldap
  #   id: ldap
  #   name: LDAP
  #   config:
  #     host: ldap.samsung.local:389
  #     insecureNoSSL: true
  #     bindDN: cn=admin,dc=samsung,dc=local
  #     bindPW: password
  #     userSearch:
  #       baseDN: ou=users,dc=samsung,dc=local
  #       filter: "(objectClass=person)"
  #       username: uid
  #       idAttr: uid
  #       emailAttr: mail
  #       nameAttr: cn
  #     groupSearch:
  #       baseDN: ou=groups,dc=samsung,dc=local
  #       filter: "(objectClass=groupOfNames)"
  #       userMatchers:
  #       - userAttr: DN
  #         groupAttr: member
  #       nameAttr: cn

# Service configuration
service:
  type: ClusterIP
  ports:
    http:
      port: 5556

# Ingress - disabled, using Gateway API instead
ingress:
  enabled: false

# Resources
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Replicas
replicaCount: 1

# RBAC
serviceAccount:
  create: true
  name: dex

