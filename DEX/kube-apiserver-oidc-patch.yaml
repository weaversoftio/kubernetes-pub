# Kubernetes API Server OIDC Configuration
# Samsung Kubernetes Platform
#
# This file contains the OIDC flags that need to be added to kube-apiserver
# Location: /etc/kubernetes/manifests/kube-apiserver.yaml
#
# IMPORTANT: Backup the original file before editing!
# sudo cp /etc/kubernetes/manifests/kube-apiserver.yaml /etc/kubernetes/manifests/kube-apiserver.yaml.backup
#
# Add these flags under spec.containers[0].command:
---
# OIDC Configuration flags to add:

- --oidc-issuer-url=https://dex.samsung.local
- --oidc-client-id=headlamp
- --oidc-username-claim=email
- --oidc-username-prefix=-
- --oidc-groups-claim=groups
- --oidc-groups-prefix=-

# Optional (if using self-signed certificate):
# - --oidc-ca-file=/etc/kubernetes/pki/ca.crt

---
# Example of what it should look like in kube-apiserver.yaml:
#
# spec:
#   containers:
#   - command:
#     - kube-apiserver
#     - --advertise-address=192.168.x.x
#     - --allow-privileged=true
#     ... (existing flags)
#     - --oidc-issuer-url=https://dex.samsung.local
#     - --oidc-client-id=headlamp
#     - --oidc-username-claim=email
#     - --oidc-username-prefix=-
#     - --oidc-groups-claim=groups
#     - --oidc-groups-prefix=-
#     ... (rest of flags)
#
# After editing, the API server will automatically restart (it's a static pod)
# Wait 1-2 minutes and verify: kubectl get pods -n kube-system | grep apiserver

